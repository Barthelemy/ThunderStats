<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"
  [
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
  %brandDTD;
  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
  %globalDTD;
  <!ENTITY % startDTD SYSTEM "chrome://thunderstats/locale/mzts-statstab.dtd">
  %startDTD;
  <!ENTITY % settingsDTD SYSTEM "chrome://thunderstats/locale/settings.dtd">
  %settingsDTD;
  ]
>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <head>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://messenger/skin/messageHeader.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://thunderstats/content/css/mzts-statstab.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://thunderstats/content/css/mzts-statstab.graphs.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://thunderstats/content/css/mzts-log.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://thunderstats/content/css/tooltip/tooltipster.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://thunderstats/content/css/tooltip/tooltipster-light.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="chrome://messenger/skin/tagColors.css"/>
    <title>&ThunderStats.TABTitle;</title>

    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/jslib/jquery-2.1.3.min.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/jslib/jquery.tooltipster.min.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/jslib/d3.min.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/jslib/moment-with-locales.min.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.callback.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.observer.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.folderworkers.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.ui.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-statstab.prefs.js"/>
    <script type="application/javascript;version=1.8" src="chrome://thunderstats/content/mzts-utils.jsm"/>
	<script type="application/javascript;version=1.8">
	$jQ(document).ready(function() {
		$jQ('.tooltip').tooltipster({
			debug:false,
			theme:'tooltipster-light'
		});
		$jQ('.tabs .tab-links a').on('click', function(e)  {
			miczThunderStatsTab.currentTab = $jQ(this).attr('href');

			// Show/Hide Tabs
			//$jQ('.tabs ' + miczThunderStatsTab.currentTab).show().siblings().hide();
			$jQ('.tabs ' + miczThunderStatsTab.currentTab).fadeIn(400,miczThunderStatsTab.ui.updateTab).siblings().hide();

			// Change/remove current tab to active
			$jQ(this).parent('li').addClass('active').siblings().removeClass('active');

			//update value
			//miczThunderStatsTab.ui.updateTab(miczThunderStatsTab.currentTab);

			e.preventDefault();
		});
	});
	</script>

  </head>

  <body>

  <xul:popupset id="mainPopupSet">
    <xul:tooltip id="mztsXulInXhtmlTooltip"/>
  </xul:popupset>

	  <div id="heading_wrapper">
		  <div id="mzts-main-error">Global Indexing is not active!</div>
		  <div id="mzts-idnt_sel">Choose Account:&nbsp;
      		<select id="identities_selector"></select>&nbsp;
			<button type="button" onclick="miczThunderStatsTab.updateStats();">Update</button>
		  </div>
		<div id="mzts-setup_icon">
			<img src="chrome://thunderstats/skin/mzts-setup.png" alt="Setup" onclick="miczThunderStatsTab.ui.openPrefWindow();"
			title="Setup" class="tooltip"/>
		</div>
		<div id="mzts-updates">
			<span id="mzts-idx_update"></span><br/>
			<span id="mzts-last_msg"></span>
		</div>
    </div>

<div id="content_wrapper">
	<div class="tabs">
		<ul class="tab-links">
			<li class="active"><a href="#tab_today">Today</a></li>
			<li><a href="#tab_yesterday">Yesterday</a></li>
			<li><a href="#tab_7days">Last 7 days</a></li>
			<li><a href="#tab_info">Info</a></li>
		</ul>

		<div class="tab-content">
			<div id="tab_today" class="tab active">
				<div id="table_today">
				  <div id="tier1_today" class="tier1">
					<div class="chunk" id="top_left_chunk_today">
				  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Today Mails</h2>
						<span id="today_date" class="list_heading_date"></span>
					  </div>
					<p><span>Sent mails: </span><span id="today_sent"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="today_sent_wait"/></p>
					<p><span>Received mails: </span><span id="today_rcvd"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="today_rcvd_wait"/></p>
					<p><span class="yesterday_incremental">Yesterday at this time it was <span id="yesterday_incremental_sent"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="yesterday_incremental_sent_wait"/> sent and <span id="yesterday_incremental_rcvd"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="yesterday_incremental_rcvd_wait"/> received.</span></p>
					</div>
					<div class="chunk" id="top_right_chunk_today">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Inbox Zero Status</h2>
					  </div>
					  <div class="chart_inbox0">
						  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="today_inbox0_wait"/></div>
						  <div>Total mails in the inbox: <span id="today_inbox0_inboxmsg"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="today_inbox0_inboxmsg_wait"/></div>
						  <div id="today_inbox0_folder_spread" class="chart_inbox0_folder_spread"><p class="chart_info">Today mails folder locations chart</p><p class="chart_info_nomail" id="today_inbox0_folder_spread_nomails">No mails received today!</p></div>
						  <div id="today_inbox0_datemsg" class="chart_inbox0_datemsg"><p class="chart_info">Inbox mails date spreading chart</p><p class="chart_info_nomail" id="today_inbox0_datemsg_nomails">No mails in the Inbox!</p></div>
					  </div>
				  </div>
				  </div>
				  <div id="tier2_today" class="tier2">
					<div class="chunk" id="bottom_left_chunk_today">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Today Top 10 Recipients</h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="today_recipients_wait"/></div>
					  <div id="today_recipients"></div>
					</div>
					<div class="chunk" id="bottom_right_chunk_today">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Today Top 10 Senders</h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="today_senders_wait"/></div>
					  <div id="today_senders"></div>
					  </div>
				  </div>
			   </div> <!-- table_today -->
			</div> <!--tab today-->

			<div id="tab_yesterday" class="tab">
				<div id="table_yesterday">
				  <div id="tier1_yesterday" class="tier1">
					<div class="chunk" id="top_left_chunk_yesterday">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Yesterday Mails</h2>
						<span id="yesterday_date" class="list_heading_date"></span>
					  </div>
						<p><span>Sent mails: </span><span id="yesterday_sent"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="yesterday_sent_wait"/></p>
						<p><span>Received mails: </span><span id="yesterday_rcvd"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="yesterday_rcvd_wait"/></p>
					</div>
					<div class="chunk" id="top_right_chunk_yesterday">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Inbox Zero Status</h2>
					  </div>
					  <div class="chart_inbox0">
						  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="yesterday_inbox0_wait"/></div>
						  <div>Total mails in the inbox: <span id="yesterday_inbox0_inboxmsg"></span><img src="chrome://thunderstats/skin/mzts-wait_line.gif" alt="Loading..." id="yesterday_inbox0_inboxmsg_wait"/></div>
						  <div id="yesterday_inbox0_folder_spread" class="chart_inbox0_folder_spread"><p class="chart_info_nomail" id="yesterday_inbox0_folder_spread_nomails">No mails received yesterday!</p><p class="chart_info">Yesterday mails folder locations chart</p></div>
						  <div id="yesterday_inbox0_datemsg" class="chart_inbox0_datemsg"><p class="chart_info_nomail" id="yesterday_inbox0_datemsg_nomails">No mails in the Inbox!</p><p class="chart_info">Inbox mails date spreading chart</p></div>
					  </div>
					</div>
				  </div>
				  <div id="tier2_yesterday" class="tier2">
					<div class="chunk" id="bottom_left_chunk_yesterday">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Yesterday Top 10 Recipients</h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="yesterday_recipients_wait"/></div>
					  <div id="yesterday_recipients"></div>
					</div>
					<div class="chunk" id="bottom_right_chunk_yesterday">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Yesterday Top 10 Senders</h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="yesterday_senders_wait"/></div>
					  <div id="yesterday_senders"></div>
					  </div>
				  </div>
			   </div> <!-- table_yesterday -->
			</div> <!--tab yesterday-->

			<div id="tab_7days" class="tab">
				<div id="table_7days">
				  <div id="tier1_7days" class="tier1">
					<div class="chunk" id="top_left_chunk_7days">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Sent Mails: <span id="7days_sent_total"></span></h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="7days_sent_wait"/></div>
						<div id="chart_7days_sent" class="chart_7days"></div>
					</div>
					<div class="chunk" id="top_right_chunk_7days">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Received Mails: <span id="7days_rcvd_total"></span></h2>
					  </div>
						<div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="7days_rcvd_wait"/></div>
						<div id="chart_7days_rcvd" class="chart_7days"></div>
					</div>
				  </div>
				  <div id="tier2_7days" class="tier2">
					<div class="chunk" id="bottom_left_chunk_7days">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Top 10 Recipients</h2>
					  </div>
					  <div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="7days_recipients_wait"/></div>
						<div id="7days_recipients"></div>
					</div>
					<div class="chunk" id="bottom_right_chunk_7days">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Top 10 Senders</h2>
					  </div>
					  	<div class="circle_wait"><img src="chrome://thunderstats/skin/mzts-wait_circle.gif" alt="Loading..." id="7days_senders_wait"/></div>
						<div id="7days_senders"></div>
					  </div>
				  </div>
			   </div> <!-- table_7days -->
			</div> <!--tab 7days-->

			<div id="tab_info" class="tab">
				<div id="table_info">
				  <div id="tier1_info" class="tier1">
					<div class="chunk" id="top_left_chunk_info">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">About this addon</h2>
					  </div>
					  <p>Do you remember the old good Eudora statistics? Do you miss them?<br/>
						Using this addon you can finally keep an eye on how you use your beloved Thunderbird!</p>
						<p>More features will be added in the future (like <span class="outlink" onclick="miczThunderStatsUtils.openLink('https://github.com/micz/ThunderStats/issues/9');">historical data analysis</span>), but if you have an idea, <span class="outlink" onclick="miczThunderStatsUtils.openLink('https://github.com/micz/ThunderStats/issues');">send it here</span>!</p>
					</div>
					<div class="chunk" id="top_right_chunk_info">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">What is Inbox Zero?</h2>
					  </div>
					  <p>Inbox Zero is a rigorous approach to email management aimed at keeping the inbox empty — or almost empty — at all times.</p>
						<p>ThunderStats gives you some insights on how you're managing your inbox.</p>
						<p><span class="outlink" onclick="miczThunderStatsUtils.openLink('http://micz.it/thunderdbird-addon-thunderstats-your-thunderbird-statistics/what-is-inbox-0/');">Click here for more info</span></p>
					</div>
				  </div>
				  <div id="tier2_7days" class="tier2">
					<div class="chunk" id="bottom_left_chunk_info">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">This is a test version!</h2>
					  </div>
					  <p>This is an experimental version, if you find any problem, or if you wish to send a suggestion, please <span class="outlink" onclick="miczThunderStatsUtils.openLink('https://github.com/micz/ThunderStats/issues');">give feedback here</span>, submitting a new issue.</p>
					  <p>Find what is going to be implemented for the first 1.0 release <span class="outlink" onclick="miczThunderStatsUtils.openLink('https://github.com/micz/ThunderStats/milestones/1.0');">here</span>.</p>
					  <p>Also take a look to the current <span class="outlink" onclick="miczThunderStatsUtils.openLink('https://github.com/micz/ThunderStats/issues?q=is%3Aopen+milestone%3A1.0+label%3Abug');">known issues</span>.</p>
					</div>
					<div class="chunk" id="bottom_right_chunk_info">
					  <div class="list_heading_wrapper">
						<h2 class="list_heading cropped">Donations</h2>
					  </div>
					  <p>&ThunderStats.InfoMainDesc;</p>
					  <p><span class="outlink" onclick="miczThunderStatsUtils.openLink('http://micz.it/thunderdbird-addon-thunderstats-your-thunderbird-statistics/donate/');">&ThunderStats.DonateLink;</span></p>
					  </div>
				  </div>
			   </div> <!-- table_info -->
			</div> <!--tab info-->
		</div>
	</div>

</div>
	 <!--<div id="test_output" class="mzts-desc"></div>-->

    <div id="log_wrapper"></div>
    <div id="log_close_btn" class="closed"><img src="chrome://thunderstats/skin/mzts-log_close.png" onclick="miczThunderStatsTab.ui.toggleLogPanel();" alt="Open log panel" title="Open log panel" class="tooltip"/></div>
    <div id="log_clear_btn"><img src="chrome://thunderstats/skin/mzts-log_clear.png" onclick="$jQ('#log_wrapper').empty();" alt="Clear log" title="Clear log" class="tooltip"/></div>
  </body>
</html>
